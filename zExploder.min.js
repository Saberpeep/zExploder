var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var n=a[e];n in b||(b[n]={});b=b[n]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var e=this;e instanceof String&&(e=String(e));var c=e.length;for(b=b||0;b<c;b++)if(e[b]==a||Object.is(e[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a){function c(){var a=document.createElement("script");a.src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js";a.type="text/javascript";a.onload=function(){b()};document.getElementsByTagName("head")[0].appendChild(a)}function b(){function b(a){a=$(a);a=parseInt(a.css("z-index"));isNaN(a)&&(a=0);return a}function c(a,b){a?t=a:a=t;b?p=b:b=p;return"translateY("+(1-b/2)+"px) translateZ("+b+"vh) rotateY("+a+"deg)"}a.layers=[];$(document);$(window);var l=$("html"),m=$("body");
document.getElementsByTagName("body");var g=[],h=$("*").filter(function(){var a=b(this);g.includes(a)||g.push(a);return"auto"!=$(this).css("z-index")});a.DEBUG_MODE&&console.log("elements with z-index set: ",h);g=g.sort(function(a,b){return a-b});a.DEBUG_MODE&&console.log("unique z-indexes: ",g);for(var d=0;d<g.length;d++)a.layers.push({zIndex:g[d],els:[]});h.each(function(r){r=b(this);for(var c=0;c<a.layers.length;c++)r==a.layers[c].zIndex&&a.layers[c].els.push(this)});console.log("zExploder layers: ",
a.layers);var p,t;l.css({perspective:"2000px","background-color":"#2e2e2e",height:"100%"});m.css({"transform-style":"preserve-3d","transform-origin":"center",transform:c(45,-100),"user-select":"none",height:"100%"});for(d=0;d<a.layers.length;d++)for(h=0;h<a.layers[d].els.length;h++){var u=$(a.layers[d].els[h]),q=0;u.parents().filter(function(){var a=$(this);return"none"!=a.css("transform")&&a[0]!=m[0]}).each(function(){var a=q;var b=$(this).css("transform").split(",");b=parseInt(b[b.length-2]);q=
a+b});u.css({transform:"translateZ("+(a.LAYER_DEPTH*d-q)+"px)",border:"1px solid red"})}d=$("*").filter(function(){return"none"!=$(this).css("transform")});a.DEBUG_MODE&&console.log("elements with transform set: ",d);d.css("transform-style","preserve-3d");d=$("*").filter(function(){return"fixed"==$(this).css("position")});a.DEBUG_MODE&&console.log("elements with position set to fixed: ",d);d.css("position","absolute");var f=0,k;l.on("mousedown",function(b){a.DEBUG_MODE&&console.log("mouse down");
k=b.pageX-f}).on("mouseup",function(){a.DEBUG_MODE&&console.log("mouse up");k=null});l[0].onmousemove=function(b){k&&(a.DEBUG_MODE&&console.log("mouse drag"),f=b.pageX-k,360<f&&(f=0,k=b.pageX-f),0>f&&(f=360,k=b.pageX-f),m.css("transform",c(f-45)));l[0].onmouseleave=function(b){a.DEBUG_MODE&&console.log("mouse out");$("#demowrap").trigger("mouseup")}};$("img").on("mousedown",function(b){a.DEBUG_MODE&&console.log("image drag prevented");b.preventDefault()});$("img").on("mousemove",function(a){a.preventDefault()});
l[0].addEventListener("wheel",function(b){a.DEBUG_MODE&&console.log("wheel");b.preventDefault();m.css("transform",c(null,p+=b.deltaY/-10))})}a.init=function(){if(a.ALREADY_RUNNING)return b();a.ALREADY_RUNNING=!0;"undefined"===typeof jQuery||"3.2.1">jQuery.fn.jquery?(console.log("zExploder: jQuery 3.2.1 or greater not present, loading jQ"),c()):b()};a.LAYER_DEPTH=100;a.DEBUG_MODE=!1})(window.zExploder=window.zExploder||{});
